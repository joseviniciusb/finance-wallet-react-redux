(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{32:function(e,t,a){e.exports=a(48)},43:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(14),c=a.n(l),o=a(21),i=a(11),u=(a(43),a(3)),s=a(10),d=a(15),m=a(16),p=a(19),h=a(18),E=a(12),b=a.n(E),f=a(2),v=a(17);function y(e){return/^\S+@\S+\.\S+$/.test(e)}var g=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:"",buttonIsEnabled:!1},e.handleChange=function(t){var a=t.target;e.setState(Object(s.a)({},a.name,a.value))},e.handleSubmit=function(t){t.preventDefault();var a=e.state.email,n=e.props,r=n.saveEmail,l=n.history;r(a),l.push("/carteira")},e}return Object(m.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this.state,n=a.email,r=a.password;t.email===n&&t.password===r||this.setState({buttonIsEnabled:y(n)&&r.length>=6})}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.buttonIsEnabled;return r.a.createElement("div",{className:"loginContainer"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",{htmlFor:"email"},"User:",r.a.createElement("input",{name:"email",type:"email","data-testid":"email-input",onChange:this.handleChange,value:t})),r.a.createElement("label",{htmlFor:"password"},"Password:",r.a.createElement("input",{name:"password",type:"password","data-testid":"password-input",onChange:this.handleChange,value:a})),r.a.createElement("button",{disabled:!n,type:"submit"},"Entrar")))}}]),a}(r.a.Component),j=Object(i.b)(null,(function(e){return{saveEmail:function(t){e({type:"SAVE_USER_EMAIL",payload:t})}}}))(g),O={value:0,method:"Dinheiro",tag:"Alimenta\xe7\xe3o",currency:"USD",description:""},x=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={currenciesNames:[],form:Object(f.a)({},O)},e.handleChange=function(t){var a=t.target;e.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{form:Object(f.a)(Object(f.a)({},e.form),{},Object(s.a)({},a.name,a.value))})}))},e.handleSubmit=function(t){t.preventDefault();var a=e.state.form;(0,e.props.dispatchAddExpense)(a),e.setState({form:O})},e.checkCurrency=function(e){switch(e){case"USD":return"D\xf3lar Comercial";case"EUR":return"Euro";default:return e}},e.renderExpenses=function(t){var a=e.props,n=a.dispatchDeleteExpense,l=a.dispatchEditExpense;return t.map((function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,t.description),r.a.createElement("td",null,t.tag),r.a.createElement("td",null,t.method),r.a.createElement("td",null,parseFloat(t.value).toFixed(2)),r.a.createElement("td",null,e.checkCurrency(t.currency)),r.a.createElement("td",null,parseFloat(t.exchangeRates[t.currency].ask).toFixed(2)),r.a.createElement("td",null,(t.exchangeRates[t.currency].ask*t.value).toFixed(2)),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,r.a.createElement("button",{"data-testid":"edit-btn",type:"button",onClick:function(){return l(t.id)}},"Editar"),"/",r.a.createElement("button",{"data-testid":"delete-btn",type:"button",onClick:function(){return n(t.id)}},"Excluir")))}))},e.calculateTotal=function(e){return e.reduce((function(e,t){return e+t.exchangeRates[t.currency].ask*t.value}),0)},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(v.a)(b.a.mark((function e(){var t=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://economia.awesomeapi.com.br/json/all").then((function(e){return e.json()})).then((function(e){t.setState({currenciesNames:Object.keys(e),form:Object(f.a)(Object(f.a)({},O),{},{currency:Object.keys(e)[0]})})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.currenciesNames,n=t.form,l=this.props,c=l.email,o=l.expenses;return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",null,r.a.createElement("span",{"data-testid":"email-field"},c),r.a.createElement("span",{"data-testid":"total-field"},this.calculateTotal(o)),r.a.createElement("span",{"data-testid":"header-currency-field"}," BRL ")),r.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("label",{htmlFor:"value"},"Valor:",r.a.createElement("input",{"data-testid":"value-input",name:"value",type:"number",onChange:this.handleChange,value:n.value,id:"value"})),r.a.createElement("label",{htmlFor:"currency"},"Moeda:",r.a.createElement("select",{"data-testid":"currency-input",id:"currency",onChange:this.handleChange,name:"currency",value:n.currency},a.filter((function(e){return"USDT"!==e})).map((function(e){return r.a.createElement("option",{"data-testid":e,key:e,value:e},e)})))),r.a.createElement("label",{htmlFor:"method"},"M\xe9todo de pagamento:",r.a.createElement("select",{"data-testid":"method-input","aria-label":"method",id:"method",name:"method",value:n.method,onChange:this.handleChange},r.a.createElement("option",{value:"Dinheiro"},"Dinheiro"),r.a.createElement("option",{value:"Cart\xe3o de cr\xe9dito"},"Cart\xe3o de cr\xe9dito"),r.a.createElement("option",{value:"Cart\xe3o de d\xe9bito"},"Cart\xe3o de d\xe9bito"))),r.a.createElement("label",{htmlFor:"tag"},"Categoria:",r.a.createElement("select",{"data-testid":"tag-input","aria-label":"tag",id:"tag",name:"tag",value:n.tag,onChange:this.handleChange},r.a.createElement("option",{value:"Alimenta\xe7\xe3o"},"Alimenta\xe7\xe3o"),r.a.createElement("option",{value:"Lazer"},"Lazer"),r.a.createElement("option",{value:"Trabalho"},"Trabalho"),r.a.createElement("option",{value:"Transporte"},"Transporte"),r.a.createElement("option",{value:"Sa\xfade"},"Sa\xfade"))),r.a.createElement("label",{htmlFor:"description"},"Descri\xe7\xe3o:",r.a.createElement("input",{"data-testid":"description-input",name:"description",type:"text",value:n.description,onChange:this.handleChange})),r.a.createElement("button",{type:"submit"},"Adicionar despesa")),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Descri\xe7\xe3o"),r.a.createElement("th",null,"Tag"),r.a.createElement("th",null,"M\xe9todo de pagamento"),r.a.createElement("th",null,"Valor"),r.a.createElement("th",null,"Moeda"),r.a.createElement("th",null,"C\xe2mbio utilizado"),r.a.createElement("th",null,"Valor convertido"),r.a.createElement("th",null,"Moeda de convers\xe3o"),r.a.createElement("th",null,"Editar/Excluir"))),r.a.createElement("tbody",null,this.renderExpenses(o))))}}]),a}(r.a.Component),w=Object(i.b)((function(e){return{email:e.user.email,expenses:e.wallet.expenses}}),(function(e){return{dispatchAddExpense:function(t){var a;e((a=t,function(){var e=Object(v.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://economia.awesomeapi.com.br/json/all").then((function(e){return e.json()})).then((function(e){var n=Object(f.a)(Object(f.a)({},a),{},{exchangeRates:e});t({type:"ADD_EXPENSE",payload:n})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},dispatchDeleteExpense:function(t){e({type:"DELETE_EXPENSE",payload:t})},dispatchEditExpense:function(t){e({type:"EDIT_EXPENSE",payload:t})}}}))(x);var C=function(){return r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/",render:function(e){return r.a.createElement(j,e)}}),r.a.createElement(u.a,{exact:!0,path:"/carteira",render:function(e){return r.a.createElement(w,e)}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var S=a(8),D=a(30),k=a(31),A={email:""},T=a(25),F={currencies:[],expenses:[]},R=Object(S.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_USER_EMAIL":return Object(f.a)(Object(f.a)({},e),{},{email:t.payload});default:return e}},wallet:function(){var e,t,a,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,l=arguments.length>1?arguments[1]:void 0;switch(l.type){case"ADD_EXPENSE":return e=0===r.expenses.length?0:1*r.expenses[r.expenses.length-1].id+1,Object(f.a)(Object(f.a)({},r),{},{expenses:[].concat(Object(T.a)(r.expenses),[Object(f.a)({id:e},l.payload)])});case"DELETE_EXPENSE":return t=r.expenses.filter((function(e){return e.id!==l.payload})),Object(f.a)(Object(f.a)({},r),{},{expenses:t});case"EDIT_EXPENSE":return n=(a=Object(T.a)(r.expenses)).findIndex((function(e){return e.id===l.payload})),a[n].value=666,Object(f.a)(Object(f.a)({},r),{},{expenses:a});case"UPDATE_CURRENCIES":return Object(f.a)(Object(f.a)({},r),{},{currencies:l.currencies});default:return r}}}),N=Object(S.createStore)(R,Object(D.composeWithDevTools)(Object(S.applyMiddleware)(k.a)));c.a.render(r.a.createElement(i.a,{store:N},r.a.createElement(o.a,null,r.a.createElement(C,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.366ebc30.chunk.js.map